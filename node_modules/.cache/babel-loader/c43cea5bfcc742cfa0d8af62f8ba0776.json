{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _JSON$stringify from \"core-js-pure/stable/json/stringify.js\";\nimport _filterInstanceProperty from \"core-js-pure/stable/instance/filter.js\";\nimport _sliceInstanceProperty from \"core-js-pure/stable/instance/slice.js\";\nexport var CACHE_PREFIX = 'react-avatar/';\nexport var CACHE_KEY_FAILING = 'failing';\n\nvar _hasLocalStorage = function isLocalStorageAvailable() {\n  try {\n    return 'localStorage' in window && window['localStorage'];\n  } catch (err) {\n    return false;\n  }\n}();\n\nexport var Cache = /*#__PURE__*/function () {\n  function Cache() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Cache);\n\n    var _options$cachePrefix = options.cachePrefix,\n        cachePrefix = _options$cachePrefix === void 0 ? CACHE_PREFIX : _options$cachePrefix,\n        _options$sourceTTL = options.sourceTTL,\n        sourceTTL = _options$sourceTTL === void 0 ? 7 * 24 * 3600 * 1000 : _options$sourceTTL,\n        _options$sourceSize = options.sourceSize,\n        sourceSize = _options$sourceSize === void 0 ? 20 : _options$sourceSize;\n    this.cachePrefix = cachePrefix;\n    this.sourceTTL = sourceTTL;\n    this.sourceSize = sourceSize;\n  }\n\n  _createClass(Cache, [{\n    key: \"set\",\n    value: function set(key, value) {\n      // cache not available\n      if (!_hasLocalStorage) return;\n      value = _JSON$stringify(value);\n\n      try {\n        localStorage.setItem(this.cachePrefix + key, value);\n      } catch (e) {\n        // failsafe for mobile Safari private mode\n        console.error(e); // eslint-disable-line no-console\n      }\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      // cache not available\n      if (!_hasLocalStorage) return null;\n      var value = localStorage.getItem(this.cachePrefix + key);\n      if (value) return JSON.parse(value);\n      return null;\n    }\n  }, {\n    key: \"sourceFailed\",\n    value: function sourceFailed(source) {\n      var cacheList = this.get(CACHE_KEY_FAILING) || []; // Remove expired entries or previous instances of this source\n\n      cacheList = _filterInstanceProperty(cacheList).call(cacheList, function (entry) {\n        var hasExpired = entry.expires > 0 && entry.expires < Date.now();\n        var isMatch = entry === source || entry.url == source;\n        return !hasExpired && !isMatch;\n      }); // Add the source to the end of the list\n\n      cacheList.unshift({\n        url: source,\n        expires: Date.now() + this.sourceTTL\n      }); // only keep the last X results so we don't fill up local storage\n\n      cacheList = _sliceInstanceProperty(cacheList).call(cacheList, 0, this.sourceSize - 1);\n      return this.set(CACHE_KEY_FAILING, cacheList);\n    }\n  }, {\n    key: \"hasSourceFailedBefore\",\n    value: function hasSourceFailedBefore(source) {\n      var cacheList = this.get(CACHE_KEY_FAILING) || [];\n      return cacheList.some(function (entry) {\n        var hasExpired = entry.expires > 0 && entry.expires < Date.now();\n        var isMatch = entry === source || entry.url == source;\n        return isMatch && !hasExpired;\n      });\n    }\n  }]);\n\n  return Cache;\n}();\nexport default new Cache();","map":{"version":3,"names":["_classCallCheck","_createClass","_JSON$stringify","_filterInstanceProperty","_sliceInstanceProperty","CACHE_PREFIX","CACHE_KEY_FAILING","_hasLocalStorage","isLocalStorageAvailable","window","err","Cache","options","arguments","length","undefined","_options$cachePrefix","cachePrefix","_options$sourceTTL","sourceTTL","_options$sourceSize","sourceSize","key","value","set","localStorage","setItem","e","console","error","get","getItem","JSON","parse","sourceFailed","source","cacheList","call","entry","hasExpired","expires","Date","now","isMatch","url","unshift","hasSourceFailedBefore","some"],"sources":["E:/share-edit/node_modules/react-avatar/es/cache.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _JSON$stringify from \"core-js-pure/stable/json/stringify.js\";\nimport _filterInstanceProperty from \"core-js-pure/stable/instance/filter.js\";\nimport _sliceInstanceProperty from \"core-js-pure/stable/instance/slice.js\";\nexport var CACHE_PREFIX = 'react-avatar/';\nexport var CACHE_KEY_FAILING = 'failing';\n\nvar _hasLocalStorage = function isLocalStorageAvailable() {\n  try {\n    return 'localStorage' in window && window['localStorage'];\n  } catch (err) {\n    return false;\n  }\n}();\n\nexport var Cache = /*#__PURE__*/function () {\n  function Cache() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Cache);\n\n    var _options$cachePrefix = options.cachePrefix,\n        cachePrefix = _options$cachePrefix === void 0 ? CACHE_PREFIX : _options$cachePrefix,\n        _options$sourceTTL = options.sourceTTL,\n        sourceTTL = _options$sourceTTL === void 0 ? 7 * 24 * 3600 * 1000 : _options$sourceTTL,\n        _options$sourceSize = options.sourceSize,\n        sourceSize = _options$sourceSize === void 0 ? 20 : _options$sourceSize;\n    this.cachePrefix = cachePrefix;\n    this.sourceTTL = sourceTTL;\n    this.sourceSize = sourceSize;\n  }\n\n  _createClass(Cache, [{\n    key: \"set\",\n    value: function set(key, value) {\n      // cache not available\n      if (!_hasLocalStorage) return;\n      value = _JSON$stringify(value);\n\n      try {\n        localStorage.setItem(this.cachePrefix + key, value);\n      } catch (e) {\n        // failsafe for mobile Safari private mode\n        console.error(e); // eslint-disable-line no-console\n      }\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      // cache not available\n      if (!_hasLocalStorage) return null;\n      var value = localStorage.getItem(this.cachePrefix + key);\n      if (value) return JSON.parse(value);\n      return null;\n    }\n  }, {\n    key: \"sourceFailed\",\n    value: function sourceFailed(source) {\n      var cacheList = this.get(CACHE_KEY_FAILING) || []; // Remove expired entries or previous instances of this source\n\n      cacheList = _filterInstanceProperty(cacheList).call(cacheList, function (entry) {\n        var hasExpired = entry.expires > 0 && entry.expires < Date.now();\n        var isMatch = entry === source || entry.url == source;\n        return !hasExpired && !isMatch;\n      }); // Add the source to the end of the list\n\n      cacheList.unshift({\n        url: source,\n        expires: Date.now() + this.sourceTTL\n      }); // only keep the last X results so we don't fill up local storage\n\n      cacheList = _sliceInstanceProperty(cacheList).call(cacheList, 0, this.sourceSize - 1);\n      return this.set(CACHE_KEY_FAILING, cacheList);\n    }\n  }, {\n    key: \"hasSourceFailedBefore\",\n    value: function hasSourceFailedBefore(source) {\n      var cacheList = this.get(CACHE_KEY_FAILING) || [];\n      return cacheList.some(function (entry) {\n        var hasExpired = entry.expires > 0 && entry.expires < Date.now();\n        var isMatch = entry === source || entry.url == source;\n        return isMatch && !hasExpired;\n      });\n    }\n  }]);\n\n  return Cache;\n}();\nexport default new Cache();"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,uCAA5B;AACA,OAAOC,YAAP,MAAyB,oCAAzB;AACA,OAAOC,eAAP,MAA4B,uCAA5B;AACA,OAAOC,uBAAP,MAAoC,wCAApC;AACA,OAAOC,sBAAP,MAAmC,uCAAnC;AACA,OAAO,IAAIC,YAAY,GAAG,eAAnB;AACP,OAAO,IAAIC,iBAAiB,GAAG,SAAxB;;AAEP,IAAIC,gBAAgB,GAAG,SAASC,uBAAT,GAAmC;EACxD,IAAI;IACF,OAAO,kBAAkBC,MAAlB,IAA4BA,MAAM,CAAC,cAAD,CAAzC;EACD,CAFD,CAEE,OAAOC,GAAP,EAAY;IACZ,OAAO,KAAP;EACD;AACF,CANsB,EAAvB;;AAQA,OAAO,IAAIC,KAAK,GAAG,aAAa,YAAY;EAC1C,SAASA,KAAT,GAAiB;IACf,IAAIC,OAAO,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAlF;;IAEAb,eAAe,CAAC,IAAD,EAAOW,KAAP,CAAf;;IAEA,IAAIK,oBAAoB,GAAGJ,OAAO,CAACK,WAAnC;IAAA,IACIA,WAAW,GAAGD,oBAAoB,KAAK,KAAK,CAA9B,GAAkCX,YAAlC,GAAiDW,oBADnE;IAAA,IAEIE,kBAAkB,GAAGN,OAAO,CAACO,SAFjC;IAAA,IAGIA,SAAS,GAAGD,kBAAkB,KAAK,KAAK,CAA5B,GAAgC,IAAI,EAAJ,GAAS,IAAT,GAAgB,IAAhD,GAAuDA,kBAHvE;IAAA,IAIIE,mBAAmB,GAAGR,OAAO,CAACS,UAJlC;IAAA,IAKIA,UAAU,GAAGD,mBAAmB,KAAK,KAAK,CAA7B,GAAiC,EAAjC,GAAsCA,mBALvD;IAMA,KAAKH,WAAL,GAAmBA,WAAnB;IACA,KAAKE,SAAL,GAAiBA,SAAjB;IACA,KAAKE,UAAL,GAAkBA,UAAlB;EACD;;EAEDpB,YAAY,CAACU,KAAD,EAAQ,CAAC;IACnBW,GAAG,EAAE,KADc;IAEnBC,KAAK,EAAE,SAASC,GAAT,CAAaF,GAAb,EAAkBC,KAAlB,EAAyB;MAC9B;MACA,IAAI,CAAChB,gBAAL,EAAuB;MACvBgB,KAAK,GAAGrB,eAAe,CAACqB,KAAD,CAAvB;;MAEA,IAAI;QACFE,YAAY,CAACC,OAAb,CAAqB,KAAKT,WAAL,GAAmBK,GAAxC,EAA6CC,KAA7C;MACD,CAFD,CAEE,OAAOI,CAAP,EAAU;QACV;QACAC,OAAO,CAACC,KAAR,CAAcF,CAAd,EAFU,CAEQ;MACnB;IACF;EAbkB,CAAD,EAcjB;IACDL,GAAG,EAAE,KADJ;IAEDC,KAAK,EAAE,SAASO,GAAT,CAAaR,GAAb,EAAkB;MACvB;MACA,IAAI,CAACf,gBAAL,EAAuB,OAAO,IAAP;MACvB,IAAIgB,KAAK,GAAGE,YAAY,CAACM,OAAb,CAAqB,KAAKd,WAAL,GAAmBK,GAAxC,CAAZ;MACA,IAAIC,KAAJ,EAAW,OAAOS,IAAI,CAACC,KAAL,CAAWV,KAAX,CAAP;MACX,OAAO,IAAP;IACD;EARA,CAdiB,EAuBjB;IACDD,GAAG,EAAE,cADJ;IAEDC,KAAK,EAAE,SAASW,YAAT,CAAsBC,MAAtB,EAA8B;MACnC,IAAIC,SAAS,GAAG,KAAKN,GAAL,CAASxB,iBAAT,KAA+B,EAA/C,CADmC,CACgB;;MAEnD8B,SAAS,GAAGjC,uBAAuB,CAACiC,SAAD,CAAvB,CAAmCC,IAAnC,CAAwCD,SAAxC,EAAmD,UAAUE,KAAV,EAAiB;QAC9E,IAAIC,UAAU,GAAGD,KAAK,CAACE,OAAN,GAAgB,CAAhB,IAAqBF,KAAK,CAACE,OAAN,GAAgBC,IAAI,CAACC,GAAL,EAAtD;QACA,IAAIC,OAAO,GAAGL,KAAK,KAAKH,MAAV,IAAoBG,KAAK,CAACM,GAAN,IAAaT,MAA/C;QACA,OAAO,CAACI,UAAD,IAAe,CAACI,OAAvB;MACD,CAJW,CAAZ,CAHmC,CAO/B;;MAEJP,SAAS,CAACS,OAAV,CAAkB;QAChBD,GAAG,EAAET,MADW;QAEhBK,OAAO,EAAEC,IAAI,CAACC,GAAL,KAAa,KAAKvB;MAFX,CAAlB,EATmC,CAY/B;;MAEJiB,SAAS,GAAGhC,sBAAsB,CAACgC,SAAD,CAAtB,CAAkCC,IAAlC,CAAuCD,SAAvC,EAAkD,CAAlD,EAAqD,KAAKf,UAAL,GAAkB,CAAvE,CAAZ;MACA,OAAO,KAAKG,GAAL,CAASlB,iBAAT,EAA4B8B,SAA5B,CAAP;IACD;EAlBA,CAvBiB,EA0CjB;IACDd,GAAG,EAAE,uBADJ;IAEDC,KAAK,EAAE,SAASuB,qBAAT,CAA+BX,MAA/B,EAAuC;MAC5C,IAAIC,SAAS,GAAG,KAAKN,GAAL,CAASxB,iBAAT,KAA+B,EAA/C;MACA,OAAO8B,SAAS,CAACW,IAAV,CAAe,UAAUT,KAAV,EAAiB;QACrC,IAAIC,UAAU,GAAGD,KAAK,CAACE,OAAN,GAAgB,CAAhB,IAAqBF,KAAK,CAACE,OAAN,GAAgBC,IAAI,CAACC,GAAL,EAAtD;QACA,IAAIC,OAAO,GAAGL,KAAK,KAAKH,MAAV,IAAoBG,KAAK,CAACM,GAAN,IAAaT,MAA/C;QACA,OAAOQ,OAAO,IAAI,CAACJ,UAAnB;MACD,CAJM,CAAP;IAKD;EATA,CA1CiB,CAAR,CAAZ;;EAsDA,OAAO5B,KAAP;AACD,CAxE+B,EAAzB;AAyEP,eAAe,IAAIA,KAAJ,EAAf"},"metadata":{},"sourceType":"module"}